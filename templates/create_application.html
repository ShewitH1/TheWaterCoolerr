{% extends '_layout.html' %}

{%block title %}Create Job Posting{% endblock %}

{% block head %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/application.css') }}">
<script src="{{ url_for('static', filename='js/application.js') }}" defer></script>
{% endblock %}

{% block body %}

<div class="container-fluid bg-secondary p-2" style="height: 100vh; width: 100%; overflow-x: hidden;">
    <div class="moving-container">
        <div class="container-fluid bg-secondary p-2">
            <div>
                <div class="mt-4"></div>
                <h1 class="text-light text-center">
                    Create Job Posting
                </h1>
            </div>
            <div class="mt-4"></div>
            <div class="row" style="width: 80%; margin: 0 auto;">
                <div class="container-fluid bg-secondary p-2">
                    <div class="container-fluid bg-dark p-1 rounded mb-4 profile-header-container">
                        <div class="col-md-8 offset-md-2">
                            <form method="POST" action="/submit_job_posting">
                                <div class="form-group">
                                    <label for="title">Job Title</label>
                                    <input type="text" class="form-control" id="title" name="title"
                                        placeholder="Enter job title" required>
                                </div>
                                <div class="form-group">
                                    <label for="description">Posting Description</label>
                                    <textarea class="form-control" id="description" name="description" rows="3"
                                        placeholder="Add a description..." required></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="salary">Salary</label>
                                    <input type="text" class="form-control" id="salary" name="salary"
                                        pattern="[0-9]+(\.[0-9]{2})?" placeholder="Enter salary amount" required>
                                </div>
                                <div class="form-group">
                                    <label for="questions">Application Questions</label>
                                    <div id="questions-container">
                                        <div class="question">
                                            <input type="text" class="form-control" name="question[]"
                                                placeholder="Enter question" required>
                                            <div class="mt-2"></div>
                                            <button type="button" class="btn btn-danger ml-2"
                                                onclick="deleteQuestion(this)">Delete</button>
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-primary mt-2" onclick="addQuestion()">Add
                                        Question</button>
                                    <div class="mt-4"></div>
                                    <script>
                                        function addQuestion() {
                                            var questionContainer = document.getElementById("questions-container");
                                            var newQuestion = document.createElement("div");
                                            newQuestion.classList.add("question");
                                            newQuestion.innerHTML = `
                                                <input type="text" class="form-control" name="question[]" placeholder="Enter question" required>
                                                <div class="mt-2"></div>
                                                <button type="button" class="btn btn-danger ml-2" onclick="deleteQuestion(this)">Delete</button>
                                            `;
                                            questionContainer.appendChild(newQuestion);
                                        }

                                        function deleteQuestion(button) {
                                            var questionContainer = button.parentNode;
                                            questionContainer.remove();
                                        }
                                    </script>
                                </div>
                                <button type="submit" class="btn btn-primary">Submit</button>
                                <div class="mt-4"></div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}